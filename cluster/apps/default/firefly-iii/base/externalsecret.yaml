---
# yaml-language-server: $schema=https://schemas.budimanjojo.com/external-secrets.io/externalsecret_v1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: &name firefly-iii-secret
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: bitwarden-secretsmanager
  target:
    name: *name
    template:
      data:
        APP_ENV: local
        SITE_OWNER: budimanjojo@gmail.com
        APP_KEY: "{{ .APP_KEY }}"
        TZ: Asia/Jakarta
        LOG_CHANNEL: errorlog
        APP_LOG_CHANNEL: notice
        MAIL_MAILER: smtp
        MAIL_HOST: smtp.gmail.com
        MAIL_PORT: "587"
        MAIL_FROM: budimanjojo@gmail.com
        MAIL_USERNAME: budimanjojo@gmail.com
        MAIL_PASSWORD: "{{ .MAIL_PASSWORD }}"
        MAIL_ENCRYPTION: ssl
        SEND_REGISTRATION_MAIL: "true"
        SEND_ERROR_MESSAGE: "false"
        SEND_LOGIN_NEW_IP: "true"
        SEND_REPORT_JOURNAL: "true"
        MAP_DEFAULT_LAT: "{{ .MAP_DEFAULT_LAT }}"
        MAP_DEFAULT_LONG: "{{ .MAP_DEFAULT_LONG }}"
        MAP_DEFAULT_ZOOM: "6"
        STATIC_CRON_TOKEN: "{{ .STATIC_CRON_TOKEN }}"
        APP_URL: "{{ .APP_URL }}"
        TRUSTED_PROXIES: "*"
  dataFrom:
    - extract:
        key: firefly-iii
